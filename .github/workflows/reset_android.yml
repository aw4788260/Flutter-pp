name: Reset Android Folder to Defaults

on:
  workflow_dispatch:

permissions:
  contents: write # Ù„Ù„Ø¥Ø°Ù† Ø¨Ø§Ù„ÙƒØªØ§Ø¨Ø© ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹

jobs:
  reset-android:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Set up Flutter
        uses: subosito/flutter-action@v2
        with:
          channel: 'stable'

      - name: ğŸ—‘ï¸ Delete old Android folder
        run: rm -rf android

      - name: âœ¨ Generate Fresh Android Project
        run: |
          flutter pub get
          # Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© (Kotlin DSL)
          flutter create . --platforms=android --org=com.example

      # âœ… Ù‡Ù†Ø§ Ù„Ù† Ù†Ù‚ÙˆÙ… Ø¨Ø£ÙŠ ØªØ¹Ø¯ÙŠÙ„ Ø£Ùˆ Ø­Ø°Ù Ù„Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (ÙƒÙ…Ø§ Ø·Ù„Ø¨Øª)
      # Ø³Ù†Ù‚ÙˆÙ… ÙÙ‚Ø· Ø¨Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙƒÙ…Ø§ Ù‡ÙŠ Ù„Ù„Ù…Ø³ØªÙˆØ¯Ø¹

      - name: ğŸ’¾ Commit and Push Changes
        run: |
          git config --global user.name "GitHub Action Bot"
          git config --global user.email "actions@github.com"
          git add android/
          # Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙˆØªØ¬Ø§Ù‡Ù„ Ø£ÙŠ Ù…Ù„ÙØ§Øª ØºÙŠØ± Ø¶Ø±ÙˆØ±ÙŠØ©
          git commit -m "â™»ï¸ Refactor: Reset Android folder to fresh Flutter defaults (Kotlin DSL)"
          git push
